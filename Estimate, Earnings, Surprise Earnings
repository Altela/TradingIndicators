//@version = 5
indicator("Estimate, Earnings, Surprise Earnings", precision=2)

symbol = syminfo.tickerid
actual = request.earnings(symbol, earnings.actual)
estimation = request.earnings(symbol, earnings.estimate)
surprise = actual - estimation

plot(estimation, title="Estimated Earnings", color=#FFFFFF, linewidth= 2)
plot(actual, title="Reported Earnings", color=(actual >= 0 ? color.new(#3861f6, 40) : color.new(#613cb0, 40)), style=plot.style_columns)
plot(surprise, title="Earning Surprise", color=(surprise >= 0 ? color(#52a49a) : color(#dd5e56)), style=plot.style_columns)
